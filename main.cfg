/**
 *  @fileOverview Grace
 */

/* need to use the CSL module to generate the CSL code */
var CSL = xdc.useModule('ti.mcu.msp430.csl.CSL');
var RTC_B = xdc.useModule('ti.mcu.msp430.csl2.rtc.RTC_B');
var EUSCI_B0 = xdc.useModule('ti.mcu.msp430.csl2.communication.EUSCI_B0');
CSL.configApiVersion = "1.30.00";  /* 1.30 added the PinMux module */

/* these modules should be part of every project */
var CS = xdc.useModule('ti.mcu.msp430.csl2.clock.CS_A');
var WDT_A = xdc.useModule('ti.mcu.msp430.csl2.watchdog.WDT_A');
var System = xdc.useModule('ti.mcu.msp430.csl2.system.System');
var GPIO = xdc.useModule('ti.mcu.msp430.csl2.gpio.GPIO');
var PinMux = xdc.module('ti.mcu.msp430.csl2.pinmux.PinMux');
var InterruptVectors = xdc.useModule('ti.mcu.msp430.csl.interrupt_vectors.InterruptVectors');

/* set stack and heap sizes as appropriate for MSP430 */
Program.sysStack = 0;
Program.stack = 64;
Program.heap = 0;
Program.argSize = 0;

/* Enable global interrupt */
System.srRegs.SR.GIE = System.srDefs.GIE;
CSL.device.vcc = 3.3;
CS.clockMode = xdc.module("ti.mcu.msp430.csl2.clock.IClock").ClockConfigMode;
CS.regs.XT1CLKHz = 32768.0;
PinMux.assignedPins = "P1.3 EUSCI_B0_SPI,P1.6 EUSCI_B0_SPI,P2.2 EUSCI_B0_SPI,PJ.4 LFXIN,PJ.5 LFXOUT";
PinMux.regs.pjsel0 = 48;
CS.csAclkSource = CS.CSA_LFXTCLK_SELECT;
CS.csSmclkSrcDivider = CS.CSA_CLOCK_DIVIDER_2;
RTC_B.startClock = false;
RTC_B.calendarModePage = false;
RTC_B.rtcCalendar.hours = 12;
RTC_B.rtcCalendarDateMonth = RTC_B.RTC_CALENDARDATE_MONTH_AUGUST;
RTC_B.rtcCalendar.dayOfMonth = 5;
RTC_B.rtcCalendar.year = 2015;
EUSCI_B0.eusciMode = EUSCI_B0.eusciBaseDefs.SPIMode;
EUSCI_B0.eusciSPI.eusciSPIMode = EUSCI_B0.eusciSPIDefs.MasterMode_4Wire;
EUSCI_B0.eusciSPI.eusciSPIPin[3] = 1;
PinMux.regs.p1sel1 = 72;
EUSCI_B0.eusciSPI.eusciSPIPin[2] = 1;
EUSCI_B0.eusciSPI.eusciSPIPin[0] = 1;
PinMux.regs.p2sel1 = 4;
EUSCI_B0.eusciSPI.eusciSPIBitRate = EUSCI_B0.eusciSPIDefs.SPIBitRate_6;
EUSCI_B0.eusciSPI.eusciSPISBSel = EUSCI_B0.eusciSPIDefs.eSPI_MSB_FIRST;
EUSCI_B0.eusciSPI.eusciSPIClockPhase = EUSCI_B0.eusciSPIDefs.eSPI_PHASE_DATA_CAPTURED_ONFIRST_CHANGED_ON_NEXT;
